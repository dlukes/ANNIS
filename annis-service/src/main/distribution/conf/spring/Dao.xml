<?xml version="1.0" encoding="UTF-8"?>
<beans

  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:util="http://www.springframework.org/schema/util"
  xmlns:tx="http://www.springframework.org/schema/tx"
  
  xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
	" 
  default-lazy-init="true">
  
  <import resource="Common.xml" />

  <!-- Transaction management -->
  
  <!-- database connection configuration -->
  <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" lazy-init="true">
    <property name="location" value="file:${annis.home}/conf/database.properties"/>
    <property name="placeholderPrefix" value="$dao{"/>
  </bean>
  
  <util:map id="tableInsertFrom">
    <entry key="text" value="(corpus_ref + :offset_corpus_id), id, name, text, toplevel_corpus" />
    <entry key="corpus" value="(id + :offset_corpus_id ), name, type, version, (pre + :offset_corpus_post), (post + :offset_corpus_post), top_level" />
    <entry key="corpus_annotation" value="(corpus_ref + :offset_corpus_id), namespace, name, value"/>
    <entry key="corpus_stats" value="name, (id + :offset_corpus_id), text, tokens, 
(max_corpus_id + :offset_corpus_id), (max_corpus_pre + :offset_corpus_post), 
(max_corpus_post + :offset_corpus_post), 
(max_node_id + :offset_node_id), source_path" />
  </util:map>

  <util:map id="tableInsertSelect">
    <entry key="text" value="corpus_ref, id, name, text, toplevel_corpus" />
    <entry key="corpus" value="id, name, type, version, pre, post, top_level" />
    <entry key="corpus_annotation" value="corpus_ref, namespace, name, value"/>
    <entry key="corpus_stats" value="name, id, text, tokens, max_corpus_id, max_corpus_pre, max_corpus_post, max_node_id, source_path" />
  </util:map>

  <!-- BEGIN EXPORTS -->
  
  <bean id="shortenerDao" class="annis.dao.ShortenerDao" lazy-init="true">
  </bean>
  
  <!-- exported Database API for administration tasks -->
 
 <bean id="administrationDao" class="annis.administration.AdministrationDao" lazy-init="true" >
    
    <property name="temporaryStagingArea" value="$dev{annis.import.temporary-staging-area}" />
    <property name="generateExampleQueries" value="${annis.import.example-queries}" />
    
    <property name="mimeTypeMapping">
      <util:map>
        <entry key="webm" value="video/webm"/>
        <entry key="ogg" value="audio/ogg"/>
        <entry key="wav" value="audio/wav"/>
        <entry key="mp3" value="audio/mpeg"/>
        <entry key="mp4" value="video/mp4" />
        <entry key="pdf" value="application/pdf"/>
        <entry key="css" value="text/css"/>
        <entry key="config" value="application/x-config+text"/>
        <entry key="properties" value="application/text+plain"/>
        <entry key="json" value="application/json"/>
      </util:map>
    </property>
    <property name="tableInsertFrom" ref="tableInsertFrom" />
    <property name="tableInsertSelect" ref="tableInsertSelect" />
    <property name="schemaVersion" value="3.4.3"/>
  </bean>
  

  <!-- END EXPORTS -->
  
  

</beans>